<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>Mahsulot qo‘shish</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family:Arial; background:#f5f5f5; }
.box { max-width:360px; margin:60px auto; background:white; padding:20px; border-radius:14px; }
input,button { width:100%; padding:14px; margin-top:12px; font-size:16px; }
button { background:#2563eb; color:white; border:none; border-radius:10px; }
</style>
</head>
<body>

<div class="box">
  <h2>Mahsulot qo‘shish</h2>
  <input id="name" placeholder="Mahsulot nomi">
  <input id="price" type="number" placeholder="Narxi (so‘m)">
  <button onclick="save()">Saqlash</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = { /* SAME CONFIG */ };
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();

function save(){
  const n=name.value.trim();
  const p=Number(price.value);
  if(!n||!p){ alert("Ma’lumot to‘liq emas"); return; }

  const u=auth.currentUser;
  if(!u){ location.href="index.html"; return; }

  db.collection("users").doc(u.uid).collection("sales").add({
    name:n, price:p,
    createdAt:firebase.firestore.FieldValue.serverTimestamp()
  }).then(()=>location.href="dashboard.html");
}
</script>

</body>
</html>
